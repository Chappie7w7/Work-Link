{% import "components/navbar.jinja2" as components %}
{% import 'components/footer.jinja2' as footer %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WorkLink – Job Listings</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style_jobs.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style_index.css') }}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

  {{ components.navbar( current_user) }}

  <!-- Hero Section -->
  <section class="hero-section" data-aos="fade-up" data-aos-delay="50">
    <div class="hero-image">
      <img src="https://www.acceptmission.com/wp-content/uploads/2021/05/Blogbanner-Business-Development-vs-Innovation-Whats-the-Difference-800x267.png.webp"
           alt="Job Opportunities">
      <div class="hero-overlay">
        <h1>Find Your Dream Job, Anywhere</h1>
        <p>
          Explore thousands of opportunities from top companies worldwide.
          Your next career move is just a click away with WorkLink.
        </p>
        <!--button class="btn-orange">Explore Job Opportunities</!--button-->
      </div>
    </div>
  </section>

  <!-- Filters Section -->
  <section class="filters-section" data-aos="fade-up" data-aos-delay="100">
    <div class="filters-container">
      <input type="text" placeholder="Search keyword">
      <select>
        <option>Job Title</option>
      </select>
      <select>
        <option>Location</option>
      </select>
      <select>
        <option>Job Type</option>
      </select>
      <select>
        <option>Salary Range</option>
      </select>
      <button class="btn-dark">Apply Filters</button>
    </div>
  </section>

  <!-- Job Listings -->
  <section class="jobs-section" data-aos="fade-up" data-aos-delay="150">
    <h2>Empleos publicados recientemente</h2>

    <div class="jobs-grid">
      {% if vacantes %}
      {% for v in vacantes %}
      <div class="job-card" data-aos="fade-up" data-aos-delay="{{ (loop.index0 % 8) * 100 }}">
        <div class="job-header">
          <div class="company-logo">
            <img src="{{ v.empresa.logo_url if v.empresa and v.empresa.logo_url else url_for('static', filename='img/default-company.png') }}" alt="{{ v.empresa.nombre_empresa if v.empresa else 'Empresa' }}">
          </div>
          <div class="job-title-section">
            <h3>{{ v.titulo }}</h3>
            <p class="company">{{ v.empresa.nombre_empresa if v.empresa else "Sin empresa" }}</p>
          </div>
        </div>
        <div class="job-info">
          <span class="location"><i class="fas fa-map-marker-alt"></i> {{ v.ubicacion or 'No especificada' }}</span>
          <span class="job-type">{{ v.modalidad or v.estado or 'General' }}</span>
        </div>
        {% if v.salario_aprox %}
        <div class="salary">
          <span class="amount">Salario: ${{ "%.2f"|format(v.salario_aprox) }}</span>
        </div>
        {% endif %}
        <p class="description">{{ v.descripcion[:160] }}...</p>
        <div class="job-actions">
          <a class="btn-view-more" href="#">Ver Más</a>
          <a class="btn-orange" href="{{ url_for('EmpleosRoute.postular', vacante_id=v.id) }}">Aplicar ahora</a>
        </div>
      </div>
      {% endfor %}
      {% else %}
      <p>No hay vacantes registradas aún.</p>
      {% endif %}
    </div>

    <!-- Paginado -->
    <div class="pagination-container" data-aos="fade-up" data-aos-delay="200">
      <div class="pagination">
        <button class="pagination-btn prev-btn" disabled>
          <i class="fas fa-chevron-left"></i>
          Anterior
        </button>
        <div class="pagination-numbers">
          <button class="pagination-number active">1</button>
          <button class="pagination-number">2</button>
          <button class="pagination-number">3</button>
          <span class="pagination-dots">...</span>
          <button class="pagination-number">8</button>
        </div>
        <button class="pagination-btn next-btn">
          Siguiente
          <i class="fas fa-chevron-right"></i>
        </button>
      </div>
      <div class="pagination-info">
        <span>Mostrando 1-9 de 72 empleos</span>
      </div>
    </div>
  </section>

  <!-- Llamar al componente footer -->
  {{ footer.footer() }}
  <!-- Inicializar AOS -->
  <script>
      AOS.init();
  </script>

</body>
</html>
