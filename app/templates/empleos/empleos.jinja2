{% import "components/navbar.jinja2" as components %}
{% import "components/footer.jinja2" as footer %}
<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Empleos</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style_empleos.css') }}">
</head>

<body>

    {{ components.navbar("empleos", "empleos", current_user) }}

    <div class="search-filter-container">
        <div class="search-bar">
            <span class="icon">üîç</span>
            <input type="text" placeholder="Buscar empleo" />
        </div>
        <div class="filter-dropdown">
            <select>
                <option value="">Tipo de empleo</option>
                <option value="tiempo-completo">Tiempo completo</option>
                <option value="medio-tiempo">Medio tiempo</option>
                <option value="temporal">Temporal</option>
                <option value="pr√°cticas">Pr√°cticas</option>
                <option value="remoto">Remoto</option>
            </select>
        </div>
    </div>

    <div class="vacantes-container">
        {% if vacantes %}
        {% for v in vacantes %}
        <div class="vacante-card">
            <h3>{{ v.titulo }}</h3>
            <p><strong>Empresa:</strong> {{ v.empresa.nombre_empresa if v.empresa else "Sin empresa" }}</p>
            <p><strong>Ubicaci√≥n:</strong> {{ v.ubicacion or "No especificada" }}</p>
            <p><strong>Modalidad:</strong> {{ v.modalidad }}</p>
            <p><strong>Estado:</strong> {{ v.estado }}</p>
            {% if v.salario_aprox %}
            <p><strong>Salario aprox:</strong> ${{ "%.2f"|format(v.salario_aprox) }}</p>
            {% endif %}
            <p>{{ v.descripcion[:150] }}...</p>
            <a href="#" class="card-btn" onclick="openModal('{{ v.titulo|escape }}', '{{ v.descripcion|escape }}', '{{ v.empresa.nombre_empresa|default('Sin empresa')|escape }}')">Ver m√°s</a>
        </div>
        {% endfor %}
        {% else %}
        <p>No hay vacantes registradas a√∫n.</p>
        {% endif %}
    </div>

    <!-- Modal flotante -->
    <div id="jobModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2 id="modalTitle"></h2>
            <p><strong>Empresa:</strong> <span id="modalEmpresa"></span></p>
            <p id="modalDesc"></p>
        </div>
    </div>

    {{ footer.footer() }}

    <script>
        function openModal(title, desc, empresa) {
            document.getElementById("modalTitle").innerText = title;
            document.getElementById("modalDesc").innerText = desc;
            document.getElementById("modalEmpresa").innerText = empresa;
            document.getElementById("jobModal").style.display = "block";
        }

        function closeModal() {
            document.getElementById("jobModal").style.display = "none";
        }

        // Cerrar modal al hacer clic fuera de √©l
        window.onclick = function(event) {
            const modal = document.getElementById("jobModal");
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
    </script>
</body>
</html>
